/**
 * @remix-run/router v0.2.0-pre.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Router={})}(this,(function(t){"use strict";function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}function n(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}var r;t.Action=void 0,(r=t.Action||(t.Action={})).Pop="POP",r.Push="PUSH",r.Replace="REPLACE";const o="popstate";function a(e){void 0===e&&(e={});let n,{initialEntries:r=["/"],initialIndex:o,v5Compat:a=!1}=e;n=r.map(((t,e)=>f(t,null,0===e?"default":void 0)));let i=d(null==o?n.length-1:o),l=t.Action.Pop,s=null;function d(t){return Math.min(Math.max(t,0),n.length-1)}function h(){return n[i]}function f(t,e,r){return void 0===e&&(e=null),c(n?h().pathname:"/",t,e,r)}return{get index(){return i},get action(){return l},get location(){return h()},createHref:t=>"string"==typeof t?t:u(t),push(e,r){l=t.Action.Push;let o=f(e,r);i+=1,n.splice(i,n.length,o),a&&s&&s({action:l,location:o})},replace(e,r){l=t.Action.Replace;let o=f(e,r);n[i]=o,a&&s&&s({action:l,location:o})},go(e){l=t.Action.Pop,i=d(i+e),s&&s({action:l,location:h()})},listen:t=>(s=t,()=>{s=null})}}function i(t){return void 0===t&&(t={}),h((function(t,e){var n,r;let{pathname:o,search:a,hash:i}=t.location;return c("",{pathname:o,search:a,hash:i},(null==(n=e.state)?void 0:n.usr)||null,(null==(r=e.state)?void 0:r.key)||"default")}),(function(t,e){return"string"==typeof e?e:u(e)}),null,t)}function l(t){return void 0===t&&(t={}),h((function(t,e){var n,r;let{pathname:o="/",search:a="",hash:i=""}=d(t.location.hash.substr(1));return c("",{pathname:o,search:a,hash:i},(null==(n=e.state)?void 0:n.usr)||null,(null==(r=e.state)?void 0:r.key)||"default")}),(function(t,e){let n=t.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let e=t.location.href,n=e.indexOf("#");r=-1===n?e:e.slice(0,n)}return r+"#"+("string"==typeof e?e:u(e))}),(function(t,e){}),t)}function s(t){return{usr:t.state,key:t.key}}function c(t,n,r,o){return void 0===r&&(r=null),e({pathname:"string"==typeof t?t:t.pathname,search:"",hash:""},"string"==typeof n?d(n):n,{state:r,key:(null==n?void 0:n.key)||o||Math.random().toString(36).substr(2,8)})}function u(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function d(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function h(e,n,r,a){void 0===a&&(a={});let{window:i=document.defaultView,v5Compat:l=!1}=a,u=i.history,d=t.Action.Pop,h=null;function f(){d=t.Action.Pop,h&&h({action:d,location:p.location})}let p={get action(){return d},get location(){return e(i,u)},listen(t){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(o,f),h=t,()=>{i.removeEventListener(o,f),h=null}},createHref:t=>n(i,t),push:function(e,n){d=t.Action.Push;let o=c(p.location,e,n);null==r||r(o,e);let a=s(o),f=p.createHref(o);try{u.pushState(a,"",f)}catch(t){i.location.assign(f)}l&&h&&h({action:d,location:o})},replace:function(e,n){d=t.Action.Replace;let o=c(p.location,e,n);null==r||r(o,e);let a=s(o),i=p.createHref(o);u.replaceState(a,"",i),l&&h&&h({action:d,location:o})},go:t=>u.go(t)};return p}function f(t,e,n){void 0===n&&(n="/");let r=b(("string"==typeof e?d(e):e).pathname||"/",n);if(null==r)return null;let o=p(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){return t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]))?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(o);let a=null;for(let t=0;null==a&&t<o.length;++t)a=y(o[t],r);return a}function p(t,e,n,r){return void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=""),t.forEach(((t,o)=>{let a={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:o,route:t};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||A(!1),a.relativePath=a.relativePath.slice(r.length));let i=E([r,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(!0===t.index&&A(!1),p(t.children,e,l,i)),(null!=t.path||t.index)&&e.push({path:i,score:g(i,t.index),routesMeta:l})})),e}const v=/^:\w+$/,m=t=>"*"===t;function g(t,e){let n=t.split("/"),r=n.length;return n.some(m)&&(r+=-2),e&&(r+=2),n.filter((t=>!m(t))).reduce(((t,e)=>t+(v.test(e)?3:""===e?1:10)),r)}function y(t,e){let{routesMeta:n}=t,r={},o="/",a=[];for(let t=0;t<n.length;++t){let i=n[t],l=t===n.length-1,s="/"===o?e:e.slice(o.length)||"/",c=w({path:i.relativePath,caseSensitive:i.caseSensitive,end:l},s);if(!c)return null;Object.assign(r,c.params);let u=i.route;a.push({params:r,pathname:E([o,c.pathname]),pathnameBase:P(E([o,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(o=E([o,c.pathnameBase]))}return a}function w(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((t,e)=>(r.push(e),"([^\\/]+)")));t.endsWith("*")?(r.push("*"),o+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):o+=n?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(o,e?void 0:"i"),r]}(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce(((t,e,n)=>{if("*"===e){let t=l[n]||"";i=a.slice(0,a.length-t.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(e){return t}}(l[n]||""),t}),{}),pathname:a,pathnameBase:i,pattern:t}}function b(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&"/"!==r?null:t.slice(n)||"/"}function A(t,e){if(!1===t||null==t)throw new Error(e)}function D(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:o=""}="string"==typeof t?d(t):t,a=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:a,search:M(r),hash:R(o)}}const E=t=>t.join("/").replace(/\/\/+/g,"/"),P=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",R=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class x{constructor(t,e,n){this.status=t,this.statusText=e||"",this.data=n}}var S;!function(t){t.data="data",t.redirect="redirect",t.error="error"}(S||(S={}));const T={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},C={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function j(n){var r,o,a,i,l;n.routes.length>0||A(!1);let s=O(n.routes),h=null,p=null,v=null,m=null,g=null,y=!1,w=f(s,n.history.location),b=null;if(null==w){let{matches:t,route:e,error:n}=_(s);w=t,b={[e.id]:n}}let D,E=null==(null==(r=n.hydrationData)?void 0:r.errors)&&null!=(null==(o=n.hydrationData)?void 0:o.loaderData)&&w.filter((t=>t.route.loader)).some((t=>{var e,r;return void 0===(null==(e=n.hydrationData)||null==(r=e.loaderData)?void 0:r[t.route.id])}));E&&console.warn("The provided hydration data did not find loaderData for all matched routes with loaders.  Performing a full initial data load");let P,M={historyAction:n.history.action,location:n.history.location,matches:w,initialized:null!=n.hydrationData&&!E,navigation:T,restoreScrollPosition:null,resetScrollPosition:!0,revalidation:"idle",loaderData:E?{}:(null==(a=n.hydrationData)?void 0:a.loaderData)||{},actionData:(null==(i=n.hydrationData)?void 0:i.actionData)||null,errors:(null==(l=n.hydrationData)?void 0:l.errors)||b,fetchers:new Map},R=null,j=!0,I=!1,W=!1,J=new Map,X=0,Y=-1,K=new Map,Q=new Set,Z=new Map;function tt(t){M=e({},M,t),null==p||p(M)}function et(r,o,a){tt(e({},null!=M.actionData&&null!=M.navigation.formMethod&&"loading"===M.navigation.state?{}:{actionData:null},a,a.loaderData?{loaderData:B(M.loaderData,a.loaderData,a.matches||[])}:{},{historyAction:r,location:o,initialized:!0,navigation:T,revalidation:"idle",restoreScrollPosition:!M.navigation.formData&&st(o,a.matches||M.matches),resetScrollPosition:j})),I||r===t.Action.Pop||(r===t.Action.Push?n.history.push(o,o.state):r===t.Action.Replace&&n.history.replace(o,o.state)),R=null,j=!0,I=!1,W=!1}async function nt(t,n,r){var o;null==(o=P)||o.abort(),R=t,I=!0===(null==r?void 0:r.startUninterruptedRevalidation),function(t,e){if(v&&m&&g){let n=m(t,e)||t.key;v[n]=g()}}(M.location,M.matches),j=!1!==(null==r?void 0:r.resetScroll);let a=null==r?void 0:r.overrideNavigation,i=f(s,n);if(!i){let{matches:e,route:r,error:o}=_(s);return void et(t,n,{matches:e,loaderData:{},errors:{[r.id]:o}})}if(null!=r&&r.pendingError){return void et(t,n,{matches:i,errors:{[N(i).route.id]:null==r?void 0:r.pendingError}})}if(l=M.location,u=n,l.pathname===u.pathname&&l.search===u.search&&l.hash!==u.hash)return void et(t,n,{matches:i});var l,u;let d=null,h=null;if(null!=r&&r.submission){let t=await async function(t,n,r,o,a){W=!0,o[o.length-1].route.index&&!V(n.search)&&(o=o.slice(0,-1));let i;tt({navigation:e({state:"submitting",location:n},r)});let l=o.slice(-1)[0];if(l.route.action){let t=new AbortController;if(P=t,i=await L(l,n,t.signal,r),t.signal.aborted)return{shortCircuited:!0};P=null}else i={type:S.error,error:new x(405,"Method Not Allowed","No action found for ["+q(n)+"]")};if(G(i)){let t=e({state:"loading",location:c(M.location,i.location)},r),n=!0!==(null==a?void 0:a.replace);return await ot(i,t,n),{shortCircuited:!0}}if(z(i)){return{pendingActionError:{[N(o,l.route.id).route.id]:i.error}}}return{pendingActionData:{[l.route.id]:i.data}}}(0,n,r.submission,i,{replace:r.replace});if(t.shortCircuited)return;d=t.pendingActionData||null,h=t.pendingActionError||null,a=e({state:"loading",location:n},r.submission)}let{shortCircuited:p,loaderData:y,errors:w}=await async function(t,n,r,o,a,i,l){let s=a;if(!s){s={state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0}}let[c,u]=H(M,o,r,n,W,i,l,Z);if(0===c.length&&0===u.length)return et(t,n,{matches:o,errors:l||null,actionData:i||null}),{shortCircuited:!0};I||(u.forEach((t=>{var e;let[n]=t,r={state:"loading",data:null==(e=M.fetchers.get(n))?void 0:e.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};M.fetchers.set(n,r)})),tt(e({navigation:s,actionData:i||M.actionData||null},u.length>0?{fetchers:new Map(M.fetchers)}:{})));let d=new AbortController;P=d,Y=++X,u.forEach((t=>{let[e]=t;return J.set(e,d)}));let h=await Promise.all([...c.map((t=>L(t,n,d.signal))),...u.map((t=>{let[,e,n]=t;return L(n,e,d.signal)}))]),f=h.slice(0,c.length),p=h.slice(c.length);if(d.signal.aborted)return{shortCircuited:!0};P=null,u.forEach((t=>J.delete(t)));let v=F(h);if(v){let t=$(M,v);return await ot(v,t),{shortCircuited:!0}}let{loaderData:m,errors:g}=U(M,o,c,f,l,u,p);!function(){let t=[];for(let e of Q){let n=M.fetchers.get(e);n||A(!1),"loading"===n.state&&(Q.delete(e),t.push(e))}it(t)}();let y=lt(Y);return e({loaderData:m,errors:g},y||u.length>0?{fetchers:new Map(M.fetchers)}:{})}(t,n,null==r?void 0:r.submission,i,a,d,h);p||et(t,n,{matches:i,loaderData:y,errors:w})}function rt(t){return M.fetchers.get(t)||C}async function ot(e,n,r){void 0===r&&(r=!1),e.revalidate&&(W=!0),n.location||A(!1),await nt(r?t.Action.Push:t.Action.Replace,n.location,{overrideNavigation:n})}function at(t){let e=J.get(t);e||A(!1),e.abort(),J.delete(t)}function it(t){for(let e of t){let t={state:"idle",data:rt(e).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};M.fetchers.set(e,t)}}function lt(t){let e=[];for(let[n,r]of K)if(r<t){let t=M.fetchers.get(n);t||A(!1),"loading"===t.state&&(at(n),K.delete(n),e.push(n))}return it(e),e.length>0}function st(t,e){if(v&&m&&g){let n=m(t,e)||t.key,r=v[n];if("number"==typeof r)return r}return null}return D={get state(){return M},initialize:function(){return h=n.history.listen((t=>{let{action:e,location:n}=t;return nt(e,n)})),M.initialized||nt(t.Action.Pop,M.location),D},subscribe:function(t){if(p)throw new Error("A router only accepts one active subscriber");return p=t,()=>{p=null}},enableScrollRestoration:function(t,e,n){if(v=t,g=e,m=n||(t=>t.key),!y&&M.navigation===T){y=!0;let t=st(M.location,M.matches);null!=t&&tt({restoreScrollPosition:t})}return()=>{v=null,g=null,m=null}},navigate:async function(e,r){if("number"==typeof e)return void n.history.go(e);let{path:o,submission:a,error:i}=k("string"==typeof e?d(e):e,r),l=c(M.location,o,null==r?void 0:r.state),s=!0===(null==r?void 0:r.replace)||null!=a?t.Action.Replace:t.Action.Push,u=r&&"resetScroll"in r?r.resetScroll:void 0;return await nt(s,l,{submission:a,pendingError:i,resetScroll:u,replace:null==r?void 0:r.replace})},fetch:function(t,n,r,o){var a;if("undefined"==typeof AbortController)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");let i=f(s,r);i||A(!1),J.has(t)&&at(t);let l=i[i.length-1].route.index&&!V(d(r).search||"")?i.slice(-2)[0]:i.slice(-1)[0],{path:h,submission:p}=k(d(r),o);if(p)return void async function(t,n,r,o,a){var i;W=!0,Z.delete(t);let l=e({state:"submitting"},a,{data:(null==(i=M.fetchers.get(t))?void 0:i.data)||void 0});M.fetchers.set(t,l),tt({fetchers:new Map(M.fetchers)});let u=new AbortController;J.set(t,u);let d=await L(o,r,u.signal,a);if(u.signal.aborted)return;if(G(d)){Q.add(t);let n=e({state:"loading"},a,{data:void 0});M.fetchers.set(t,n),tt({fetchers:new Map(M.fetchers)});let r=e({state:"loading",location:c(M.location,d.location)},a);return void await ot(d,r)}if(z(d)){let e=N(M.matches,n);return M.fetchers.delete(t),void tt({fetchers:new Map(M.fetchers),errors:{[e.route.id]:d.error}})}let h=M.navigation.location||M.location,p="idle"!==M.navigation.state?f(s,M.navigation.location):M.matches;p||A(!1);let v=++X;K.set(t,v);let m=e({state:"loading",data:d.data},a);M.fetchers.set(t,m);let[g,y]=H(M,p,a,h,W,{[o.route.id]:d.data},null,Z);y.filter((e=>{let[n]=e;return n!==t})).forEach((e=>{var n;let[r]=e,o={state:"loading",data:null==(n=M.fetchers.get(t))?void 0:n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};M.fetchers.set(r,o),J.set(r,u)})),tt({fetchers:new Map(M.fetchers)});let w=await Promise.all([...g.map((t=>L(t,h,u.signal))),...y.map((t=>{let[,e,n]=t;return L(n,e,u.signal)}))]),b=w.slice(0,g.length),D=w.slice(g.length);if(u.signal.aborted)return;K.delete(t),J.delete(t),y.forEach((t=>J.delete(t)));let E=F(b);if(E){let t=$(M,E);return void await ot(E,t)}let{loaderData:x,errors:S}=U(M,M.matches,g,b,null,y,D),T={state:"idle",data:d.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};M.fetchers.set(t,T);let C=lt(v);if("loading"===M.navigation.state&&v>Y){var j;R||A(!1),null==(j=P)||j.abort(),et(R,M.navigation.location,{matches:p,loaderData:x,errors:S,fetchers:new Map(M.fetchers)})}else tt(e({errors:S,loaderData:B(M.loaderData,x,p)},C?{fetchers:new Map(M.fetchers)}:{})),W=!1}(t,n,r,l,p);let v={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:(null==(a=M.fetchers.get(t))?void 0:a.data)||void 0};!async function(t,e,n,r,o){M.fetchers.set(t,o),tt({fetchers:new Map(M.fetchers)}),Z.set(t,[n,r]);let a=new AbortController;J.set(t,a);let i=await L(r,n,a.signal);if(a.signal.aborted)return;if(J.delete(t),G(i)){let t=$(M,i);return void await ot(i,t)}if(z(i)){let n=N(M.matches,e);return M.fetchers.delete(t),void tt({fetchers:new Map(M.fetchers),errors:{[n.route.id]:i.error}})}let l={state:"idle",data:i.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};M.fetchers.set(t,l),tt({fetchers:new Map(M.fetchers)})}(t,n,u(h),l,v)},revalidate:function(){W=!0,tt({revalidation:"loading"}),"submitting"===M.navigation.state&&"get"!==M.navigation.formMethod||("idle"!==M.navigation.state?nt(R||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation}):nt(M.historyAction,M.location,{startUninterruptedRevalidation:!0}))},createHref:q,getFetcher:rt,deleteFetcher:function(t){J.has(t)&&at(t),Z.delete(t),K.delete(t),Q.delete(t),M.fetchers.delete(t)},dispose:function(){var t;h&&h(),p=null,null==(t=P)||t.abort();for(let[,t]of J)t.abort()},_internalFetchControllers:J},D}function O(t,n,r){return void 0===n&&(n=[]),void 0===r&&(r=new Set),t.map(((t,o)=>{let a=[...n,o],i="string"==typeof t.id?t.id:a.join("-");return r.has(i)&&A(!1),r.add(i),e({},t,{id:i,children:t.children?O(t.children,a,r):void 0})}))}function k(t,n){if(!n||!("formMethod"in n)&&!("formData"in n))return{path:t};if(null!=n.formMethod&&"get"!==n.formMethod)return{path:t,submission:{formMethod:n.formMethod,formAction:q(t),formEncType:(null==n?void 0:n.formEncType)||"application/x-www-form-urlencoded",formData:n.formData}};if(!n.formData)return{path:t};let r=new URLSearchParams(t.search);for(let[e,o]of n.formData){if("string"!=typeof o)return{path:t,error:new x(400,"Bad Request","Cannot submit binary form data using GET")};r.append(e,o)}return{path:e({},t,{search:"?"+r})}}function $(t,e){let{formMethod:n,formAction:r,formEncType:o,formData:a}=t.navigation;return{state:"loading",location:c(t.location,e.location),formMethod:n||void 0,formAction:r||void 0,formEncType:o||void 0,formData:a||void 0}}function H(t,e,n,r,o,a,i,l){let s=i?e.findIndex((t=>t.route.id===Object.keys(i)[0])):e.length,c=i?Object.values(i)[0]:a?Object.values(a)[0]:null,u=e.filter(((e,a)=>!(!e.route.loader||a>=s)&&(function(t,e,n){let r=!e||n.route.id!==e.route.id,o=void 0===t[n.route.id];return r||o}(t.loaderData,t.matches[a],e)||I(t.location,t.matches[a],n,r,e,o,c)))),d=[];if(o)for(let t of l.entries()){let[e,[r,a]]=t;I(r,a,n,r,a,o,c)&&d.push([e,r,a])}return[u,d]}function I(t,n,r,o,a,i,l){var s;let c=J(t),u=n.params,d=J(o),h=a.params,f=n.pathname!==a.pathname||(null==(s=n.route.path)?void 0:s.endsWith("*"))&&n.params["*"]!==a.params["*"]||c.toString()===d.toString()||c.search!==d.search||i;return a.route.shouldRevalidate?a.route.shouldRevalidate(e({currentUrl:c,currentParams:u,nextUrl:d,nextParams:h},r,{actionResult:l,defaultShouldRevalidate:f})):f}async function L(t,e,n,r){let o,a=S.data;try{let a=r?"action":"loader",i=t.route[a];i||A(!1),o=await i({params:t.params,request:W(e,r),signal:n})}catch(t){a=S.error,o=t}if(o instanceof Response){var i;let t,e=o.status,n=o.headers.get("Location");return e>=300&&e<=399&&null!=n?{type:S.redirect,status:e,location:n,revalidate:null!==o.headers.get("X-Remix-Revalidate")}:(t=null!=(i=o.headers.get("Content-Type"))&&i.startsWith("application/json")?await o.json():await o.text(),a===S.error?{type:a,error:new x(e,o.statusText,t)}:{type:a,data:t})}return a===S.error?{type:a,error:o}:{type:a,data:o}}function W(t,e){let n=J(t).toString();if(!e)return new Request(n);let{formMethod:r,formEncType:o,formData:a}=e,i=a;if("application/x-www-form-urlencoded"===o){i=new URLSearchParams;for(let[t,e]of a.entries())"string"!=typeof e&&A(!1),i.append(t,e)}return new Request(n,{method:r.toUpperCase(),body:i})}function U(t,n,r,o,a,i,l){let s={},c=null;return o.forEach(((t,e)=>{let o=r[e].route.id;if(G(t)&&A(!1),z(t)){let e=N(n,o),r=t.error;a&&(r=Object.values(a)[0],a=null),c=Object.assign(c||{},{[e.route.id]:r})}else s[o]=t.data})),a&&(c=a),i.forEach(((n,r)=>{let[o,a,i]=n,s=l[r];if(z(s)){var u;let n=N(t.matches,i.route.id);null!=(u=c)&&u[n.route.id]||(c=e({},c,{[n.route.id]:s.error})),t.fetchers.delete(o)}else if(G(s))A(!1);else{let e={state:"idle",data:s.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};t.fetchers.set(o,e)}})),{loaderData:s,errors:c}}function B(t,n,r){let o=e({},n);return r.forEach((e=>{let r=e.route.id;void 0===n[r]&&void 0!==t[r]&&(o[r]=t[r])})),o}function N(t,e){return(e?t.slice(0,t.findIndex((t=>t.route.id===e))+1):[...t]).reverse().find((t=>t.route.errorElement))||t[0]}function _(t){let e=t.find((t=>t.index||""===t.path||"/"===t.path))||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e,error:new x(404,"Not Found",null)}}function F(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(G(n))return n}}function q(t){return(t.pathname||"")+(t.search||"")}function z(t){return t.type===S.error}function G(t){return(null==t?void 0:t.type)===S.redirect}function V(t){return new URLSearchParams(t).getAll("index").some((t=>""===t))}function J(t){let e="undefined"!=typeof window&&void 0!==window.location?window.location.origin:"unknown://unknown",n="string"==typeof t?t:q(t);return new URL(n,e)}const X=["initialEntries","initialIndex"],Y=["window"],K=["window"];t.IDLE_FETCHER=C,t.IDLE_NAVIGATION=T,t.createBrowserHistory=i,t.createBrowserRouter=function(t){let{window:r}=t,o=n(t,Y);return j(e({history:i({window:r})},o))},t.createHashHistory=l,t.createHashRouter=function(t){let{window:r}=t,o=n(t,K);return j(e({history:l({window:r})},o))},t.createMemoryHistory=a,t.createMemoryRouter=function(t){let{initialEntries:r,initialIndex:o}=t,i=n(t,X);return j(e({history:a({initialEntries:r,initialIndex:o})},i))},t.createPath=u,t.createRouter=j,t.generatePath=function(t,e){return void 0===e&&(e={}),t.replace(/:(\w+)/g,((t,n)=>(null==e[n]&&A(!1),e[n]))).replace(/\/*\*$/,(t=>null==e["*"]?"":e["*"].replace(/^\/*/,"/")))},t.getToPathname=function(t){return""===t||""===t.pathname?"/":"string"==typeof t?d(t).pathname:t.pathname},t.invariant=A,t.isRouteErrorResponse=function(t){return t instanceof x},t.joinPaths=E,t.json=function(t,n){void 0===n&&(n={});let r="number"==typeof n?{status:n}:n,o=new Headers(r.headers);return o.has("Content-Type")||o.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),e({},r,{headers:o}))},t.matchPath=w,t.matchRoutes=f,t.normalizePathname=P,t.parsePath=d,t.redirect=function(t,n){void 0===n&&(n=302);let r=n;"number"==typeof r?r={status:r}:void 0===r.status&&(r.status=302);let o=new Headers(r.headers);return o.set("Location",t),new Response(null,e({},r,{headers:o}))},t.resolvePath=D,t.resolveTo=function(t,n,r){let o,a="string"==typeof t?d(t):e({},t),i=""===t||""===a.pathname?"/":a.pathname;if(null==i)o=r;else{let t=n.length-1;if(i.startsWith("..")){let e=i.split("/");for(;".."===e[0];)e.shift(),t-=1;a.pathname=e.join("/")}o=t>=0?n[t]:"/"}let l=D(a,o);return i&&"/"!==i&&i.endsWith("/")&&!l.pathname.endsWith("/")&&(l.pathname+="/"),l},t.stripBasename=b,t.warning=function(t,e){if(!t){"undefined"!=typeof console&&console.warn(e);try{throw new Error(e)}catch(t){}}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=router.production.min.js.map
