/**
 * React Router v6.4.0-pre.8
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
import{invariant as e,resolveTo as t,getToPathname as n,joinPaths as r,matchPath as a,parsePath as o,matchRoutes as i,isRouteErrorResponse as l,createMemoryRouter as u,createMemoryHistory as s,stripBasename as c,Action as p}from"@remix-run/router";export{Action as NavigationType,createPath,generatePath,isRouteErrorResponse,json,matchPath,matchRoutes,parsePath,redirect,resolvePath}from"@remix-run/router";import*as h from"react";const m="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},{useState:d,useEffect:f,useLayoutEffect:v,useDebugValue:g}=h;function E(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!m(n,e)}catch(r){return!0}}const x=!!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?function(e,t,n){return t()}:function(e,t,n){const r=t(),[{inst:a},o]=d({inst:{value:r,getSnapshot:t}});return v((()=>{a.value=r,a.getSnapshot=t,E(a)&&o({inst:a})}),[e,r,t]),f((()=>{E(a)&&o({inst:a});return e((()=>{E(a)&&o({inst:a})}))}),[e]),g(r),r},y="useSyncExternalStore"in h?h.useSyncExternalStore:x,C=h.createContext(null),S=h.createContext(null),R=h.createContext(null),b=h.createContext(null),D=h.createContext({outlet:null,matches:[]}),U=h.createContext(null);function N(t){P()||e(!1);let{basename:a,navigator:o}=h.useContext(R),{hash:i,pathname:l,search:u}=j(t),s=l;if("/"!==a){let e=n(t),o=!a.endsWith("/")&&""!==t&&""!==t?.pathname&&null!=e&&e.endsWith("/");s="/"!==l?r([a,l]):o?a+"/":a}return o.createHref({pathname:s,search:u,hash:i})}function P(){return null!=h.useContext(b)}function w(){return P()||e(!1),h.useContext(b).location}function k(){return h.useContext(b).navigationType}function A(t){P()||e(!1);let{pathname:n}=w();return h.useMemo((()=>a(t,n)),[n,t])}function F(e){return e.filter(((t,n)=>0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase))}function M(){P()||e(!1);let{basename:n,navigator:a}=h.useContext(R),{matches:i}=h.useContext(D),{pathname:l}=w(),u=JSON.stringify(F(i).map((e=>e.pathnameBase))),s=h.useRef(!1);return h.useEffect((()=>{s.current=!0})),h.useCallback(((e,i={})=>{if(!s.current)return;if("number"==typeof e)return void a.go(e);let c=t(e,JSON.parse(u),l);if("/"!==n){let t="string"==typeof e?o(e):e,a=null==t.pathname||""===t.pathname;c.pathname=a?n:r([n,c.pathname])}(i.replace?a.replace:a.push)(c,i.state,i)}),[n,a,u,l])}const O=h.createContext(null);function L(){return h.useContext(O)}function B(e){let t=h.useContext(D).outlet;return t?h.createElement(O.Provider,{value:e},t):t}function T(){let{matches:e}=h.useContext(D),t=e[e.length-1];return t?t.params:{}}function j(e){let{matches:n}=h.useContext(D),{pathname:r}=w(),a=JSON.stringify(F(n).map((e=>e.pathnameBase)));return h.useMemo((()=>t(e,JSON.parse(a),r)),[e,a,r])}function I(t,n){P()||e(!1);let a=h.useContext(S),{matches:l}=h.useContext(D),u=l[l.length-1],s=u?u.params:{};!u||u.pathname;let c=u?u.pathnameBase:"/";u&&u.route;let p,m=w();if(n){let t="string"==typeof n?o(n):n;"/"===c||t.pathname?.startsWith(c)||e(!1),p=t}else p=m;let d=p.pathname||"/",f="/"===c?d:d.slice(c.length)||"/",v=i(t,{pathname:f});return H(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:r([c,e.pathname]),pathnameBase:"/"===e.pathnameBase?c:r([c,e.pathnameBase])}))),l,a||void 0)}function J(){let e=K(),t=l(e)?`${e.status} ${e.statusText}`:e?.message||JSON.stringify(e),n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unhandled Thrown Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),e?.stack?h.createElement("pre",{style:r},e?.stack):null,h.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your ownÂ ",h.createElement("code",{style:a},"errorElement")," props onÂ ",h.createElement("code",{style:a},"<Route>")))}class _ extends h.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?h.createElement(U.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function H(t,n=[],r){if(null==t){if(!r?.errors)return null;t=r.matches}let a=t,o=r?.errors;if(null!=o){let t=a.findIndex((e=>e.route.id&&o?.[e.route.id]));t>=0||e(!1),a=a.slice(0,Math.min(a.length,t+1))}return a.reduceRight(((e,t,i)=>{let l=t.route.id?o?.[t.route.id]:null,u=r?t.route.errorElement||h.createElement(J,null):null,s=()=>h.createElement(D.Provider,{children:l?u:void 0!==t.route.element?t.route.element:e,value:{outlet:e,matches:n.concat(a.slice(0,i+1))}});return r&&(t.route.errorElement||0===i)?h.createElement(_,{location:r.location,component:u,error:l,children:s()}):s()}),null)}var W;function z(t){let n=h.useContext(S);return n||e(!1),n}function V(){return z(W.UseNavigation).navigation}function $(){let t=h.useContext(C);t||e(!1);let n=z(W.UseRevalidator);return{revalidate:t.revalidate,state:n.revalidation}}function X(){let{matches:e,loaderData:t}=z(W.UseMatches);return h.useMemo((()=>e.map((e=>{let{pathname:n,params:r}=e;return{id:e.route.id,pathname:n,params:r,data:t[e.route.id],handle:e.route.handle}}))),[e,t])}function Y(){let t=z(W.UseLoaderData),n=h.useContext(D);n||e(!1);let r=n.matches[n.matches.length-1];return r.route.id||e(!1),t.loaderData[r.route.id]}function q(e){return z(W.UseRouteLoaderData).loaderData[e]}function G(){let t=z(W.UseActionData);return h.useContext(D)||e(!1),Object.values(t?.actionData||{})[0]}function K(){let t=h.useContext(U),n=z(W.UseRouteError),r=h.useContext(D),a=r.matches[r.matches.length-1];return t||(r||e(!1),a.route.id||e(!1),n.errors?.[a.route.id])}let Q;function Z({children:e,fallbackElement:t,routes:n,createRouter:r}){Q||(Q=r(n||ue(e)).initialize());let a=Q,o=y(a.subscribe,(()=>a.state)),i=h.useMemo((()=>({createHref:a.createHref,go:e=>a.navigate(e),push:(e,t,n)=>a.navigate(e,{state:t,resetScroll:n?.resetScroll}),replace:(e,t,n)=>a.navigate(e,{replace:!0,state:t,resetScroll:n?.resetScroll})})),[a]);return o.initialized?h.createElement(C.Provider,{value:a},h.createElement(S.Provider,{value:o},h.createElement(oe,{location:o.location,navigationType:o.historyAction,navigator:i},h.createElement(le,{routes:n,children:e})))):h.createElement(h.Fragment,null,t)}function ee({children:e,initialEntries:t,initialIndex:n,hydrationData:r,fallbackElement:a,routes:o}){return Z({children:e,fallbackElement:a,routes:o,createRouter:e=>u({initialEntries:t,initialIndex:n,routes:e,hydrationData:r})})}function te({basename:e,children:t,initialEntries:n,initialIndex:r}){let a=h.useRef();null==a.current&&(a.current=s({initialEntries:n,initialIndex:r,v5Compat:!0}));let o=a.current,[i,l]=h.useState({action:o.action,location:o.location});return h.useLayoutEffect((()=>o.listen(l)),[o]),h.createElement(oe,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:o})}function ne({to:t,replace:n,state:r}){P()||e(!1);let a=M();return h.useEffect((()=>{a(t,{replace:n,state:r})})),null}function re(e){return B(e.context)}function ae(t){e(!1)}function oe({basename:t="/",children:n=null,location:r,navigationType:a=p.Pop,navigator:i,static:l=!1}){P()&&e(!1);let u=t.replace(/^\/*/,"/"),s=h.useMemo((()=>({basename:u,navigator:i,static:l})),[u,i,l]);"string"==typeof r&&(r=o(r));let{pathname:m="/",search:d="",hash:f="",state:v=null,key:g="default"}=r,E=h.useMemo((()=>{let e=c(m,u);return null==e?null:{pathname:e,search:d,hash:f,state:v,key:g}}),[u,m,d,f,v,g]);return null==E?null:h.createElement(R.Provider,{value:s},h.createElement(b.Provider,{children:n,value:{location:E,navigationType:a}}))}function ie({children:e,location:t}){return I(ue(e),t)}function le({children:e,location:t,routes:n}){return I(n||ue(e),t)}function ue(t,n=[]){let r=[];return h.Children.forEach(t,((t,a)=>{if(!h.isValidElement(t))return;if(t.type===h.Fragment)return void r.push.apply(r,ue(t.props.children,n));t.type!==ae&&e(!1);let o=[...n,a],i={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(i.children=ue(t.props.children,o)),r.push(i)})),r}function se(e){return H(e)}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(W||(W={}));export{ee as DataMemoryRouter,te as MemoryRouter,ne as Navigate,re as Outlet,ae as Route,oe as Router,ie as Routes,C as UNSAFE_DataRouterContext,S as UNSAFE_DataRouterStateContext,b as UNSAFE_LocationContext,R as UNSAFE_NavigationContext,D as UNSAFE_RouteContext,ue as createRoutesFromChildren,se as renderMatches,G as useActionData,N as useHref,P as useInRouterContext,Y as useLoaderData,w as useLocation,A as useMatch,X as useMatches,M as useNavigate,V as useNavigation,k as useNavigationType,B as useOutlet,L as useOutletContext,T as useParams,Z as useRenderDataRouter,j as useResolvedPath,$ as useRevalidator,K as useRouteError,q as useRouteLoaderData,I as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
